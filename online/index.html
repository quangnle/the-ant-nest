<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Bug Farm</title>
  <style>
    body {
      font-family: Calibri, sans-serif;
      font-size: 12px;
    }

    h4 {
      font-family: Calibri, sans-serif;
      font-size: 14px;
    }

    h5 {
      font-family: Calibri, sans-serif;
      font-size: 12px;
    }

    button {
      font-family: Calibri, sans-serif;
      font-size: 12px;
    }
  </style>
  <link rel="stylesheet" href="./assets/styles/index.css">
  <link rel="stylesheet" href="./assets/login-box.css">
</head>

<body>
  <div class="game">
    <div name="game-area">
      <div id="sketch-holder">
        <div class="main-canvas__wrapper border-wrapper">
          <canvas id="main-canvas"></canvas>
        </div>
        <div class="auth-overlay">
          <form class="login-box">
            <input name="username" class="input" placeholder="Enter your ID" value="test" autofocus="true" />
            <input name="password" class="input" placeholder="Enter your password" value="12345678" />
            <div class="actions">
              <button type="submit" class="login-box__login btn">Login</button>
              <button class="login-box__signup btn">Register</button>
            </div>
          </form>
          <div class="tank-list"></div>
        </div>
      </div>
    </div>

    <div class="bottom-area">
      <div class="control border-wrapper">
        <div class="control-select">
          <div class="btn no-border">Player Info</div>
          <div class="btn no-border">Flower</div>
          <div class="btn no-border">Player Info</div>
        </div>
  
        <div class="control-body">
          <div class="control-body--inner">
  
            <div class="control-section control-section--information">
              <p>Player: </p>
              <p>Money: <span data-stat="money" style="margin-right: 2px;">$0</span></p>
              <p>Capacity: <span data-stat="capacity" style="margin-right: 2px;">0</span></p>
              <p>Flowers: <span data-stat="flowers" style="margin-right: 2px;">0</span></p>
              <p>Population: <span data-stat="population" style="margin-right: 2px;">0</span></p>
            </div>
    
            <div class="control-section control-section--flower">
              <ul style="list-style-type: none; padding: 5px;">
                <li>Number of petals: <input type="number" id="petal-number" value="5" min="5" max="8" style="width: 25px;">
                </li>
                <li>
                  <ul style="list-style-type: none; padding: 3px;">
                    <li style="display: inline;">Pistil Color: <input type="color" id="pistil-color" value="#ff0000"
                        style="width: 35px;"></li>
                    <li style="display: inline;">Size: <input type="number" id="pistil-size" value="5" min="3" max="7"
                        style="width: 25px;"></li>
                  </ul>
                </li>
                <li>
                  <ul style="list-style-type: none; padding: 3px;">
                    <li style="display: inline;">Petal Color: <input type="color" id="petal-color" value="#ffffff"
                        style="width: 35px;"></li>
                    <li style="display: inline;">Size: <input type="number" id="petal-size" value="5" min="3" max="7"
                        style="width: 25px;"></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="target-object border-wrapper">
        <div class="target-zoom">
          <canvas id="object-render-canvas" width="50" height="50"></canvas>
          <canvas id="bug-pattern-canvas" width="50" height="50"></canvas>
        </div>

        <div id="object-info" readonly rows="10" cols="20"></div>

        <button id="btn-sell-it" style="margin-left: 2px; visibility: hidden;" onclick="handleSellBug()">Sell
          it</button>
        <button id="btn-bring-to-market" style="visibility: hidden;">Bring it to the market</button>
        <button id="btn-remove-it" style="margin-left: 2px; visibility: hidden;" onclick="handleRemoveFlower()">Remove
          it</button>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.2/axios.min.js"></script>
  <script src="../patterns.js"></script>
  <script src="./utils/button.js"></script>
  <script src="../evolution.js"></script>
  <script src="../bug.js"></script>
  <script src="../flower.js"></script>
  <script src="../farm.js"></script>
  <script src="../control-panel.js"></script>
  <script src="../sketch.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.2/axios.min.js"></script>
  <script src="./utils/api.js"></script>
  <script src="./utils/setup.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.min.js"
    integrity="sha512-eu9vkh+EbAsW3fMmPTj/DP5W3UegIdu0Z/OABMocvoofx43MYBkcQ9hRIVxZndV1vcCYQwBg+U1PkWl04TD0Jg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    document.addEventListener('contextmenu', event => event.preventDefault());

    const btnshow = document.getElementById("btn-show");
    const objcvs = document.getElementById("object-render-canvas");
    const patterncvs = document.getElementById("bug-pattern-canvas");
    const objctx = objcvs.getContext("2d");
    objctx.fillStyle = "#ffffff";
    objctx.strokeStyle = "#000000";
    objctx.fillRect(0, 0, 50, 50);

    function show() {
      const flowers = farm.objects.filter(obj => obj instanceof Flower);
      if (flowers.length > 0) {
        if (btnshow.innerHTML === "Stop The Show") {
          btnshow.innerHTML = "Start The Show!!!";
          farm.mode = "play";
          farm.colony.forEach(bug => {
            bug.nextTarget = null;
          });
        } else {
          btnshow.innerHTML = "Stop The Show";
          farm.mode = "show";

          if (flowers.length > 0) {
            farm.colony.forEach(bug => {
              bug.nextTarget = flowers[0];
              bug.nextTargetIndex = 0;
            });
          }
        }
      }
    }

    function sellABug() {
      if (farm.colony.length === 1) return;

      farm.colony.forEach((bug, index) => {
        if (bug === selectedObj) {
          farm.colony.splice(index, 1);
        }
      });
    }
  </script>
</body>

</html>